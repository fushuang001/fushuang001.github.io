I"Å<hr />

<h1 id="å°†-aci-image-è½¬æ¢ä¸º-standalone-nxos-image">å°† ACI image è½¬æ¢ä¸º standalone NXOS image</h1>
<p><a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus9000/sw/7-x/upgrade/guide/b_Cisco_Nexus_9000_Series_NX-OS_Software_Upgrade_and_Downgrade_Guide_Release_7x/Converting_from_Cisco_NX_OS_to_ACI_Boot_Mode.pdf">å®˜æ–¹å‚è€ƒæ–‡æ¡£-è‹±æ–‡</a></p>

<p>ç›´æ¥æŸ¥æ‰¾ <strong>Converting Back to Cisco NX-OS</strong></p>

<ol>
  <li>
    <p>ä¸€èˆ¬æ¥è¯´ï¼ŒACI image çš„ Nexus9000 bootflash ä¸­å¦‚æœæ²¡æœ‰ NXOS é•œåƒï¼Œéœ€è¦å€ŸåŠ© U ç›˜ï¼Œå°† NXOS é•œåƒæ”¾å…¥ U ç›˜ï¼›</p>
  </li>
  <li>
    <p>æ¥ä¸Š consoleçº¿ï¼Œé‡å¯ ACI image çš„ Nexus9000ï¼ŒæŒ‰ä¸‹ <kbd>Ctrl</kbd> + <kbd>C</kbd> æˆ–è€…<kbd> Ctrl</kbd> + <kbd>]</kbd> ä¸­æ–­å¯åŠ¨è¿‡ç¨‹ï¼Œè¿›å…¥ <code class="highlighter-rouge">loader&gt;</code> æ¨¡å¼</p>
  </li>
  <li>
    <p>è¾“å…¥å‘½ä»¤<code class="highlighter-rouge">cmdline recoverymode=1</code></p>
  </li>
  <li>
    <p>è¾“å…¥å‘½ä»¤ <code class="highlighter-rouge">dir</code>  æ¥æŸ¥çœ‹æ˜¯å¦å­˜åœ¨å¯ç”¨çš„ NXOS å¯åŠ¨é•œåƒ</p>
  </li>
  <li>
    <p>è¾“å…¥å‘½ä»¤<code class="highlighter-rouge">boot nxos.7.0.3.I7.6.bin</code>å¯åŠ¨ NXOS imageï¼Œè‹¥ä» bootflash å¯åŠ¨ï¼Œè¾“å…¥å‘½ä»¤<code class="highlighter-rouge">boot usb1:nxos.7.0.3.I7.6.bin</code></p>
  </li>
  <li>
    <p>å®Œæˆ NXOS image å¯åŠ¨ä¹‹åï¼Œå»ºè®®å†æ–­ç”µé‡å¯ä¸€æ¬¡ï¼Œä¿è¯é‡å¯è¿‡ç¨‹é¡ºåˆ©è¿›å…¥ NXOS.</p>
  </li>
</ol>

<p><strong>ä¸¾ä¸ªæ —å­</strong></p>

<p>```</p>

<p>Converting ACI Back to Cisco NX-OS
bootflash NOT have any nxos image, need to recovery from USB disk</p>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”- Aborting config file read and autoboot â€”â€”â€”â€”â€”â€”â€”â€”â€”- 
No autoboot or failed autoboot. falling to loader</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            Loader Version 7.65
</code></pre></div></div>

<p>loader &gt;</p>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”- loader &gt; cmdline recoverymode=1 â€”â€”â€”â€”â€”â€”â€”â€”â€”-</p>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”- loader &gt; boot nxos.7.0.3.I7.6.bin â€”â€”â€”â€”â€”â€”â€”â€”â€”- 
Booting nxos.7.0.3.I7.6.bin
Trying diskboot
 Filesystem type is ext2fs, partition type 0x83
Boot failed</p>

<p>Error 9: Unknown boot failure</p>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”-  loader &gt; dir â€”â€”â€”â€”â€”â€”â€”â€”â€”-</p>

<p>usb1::</p>

<p>System Volume Information
 n7700-s2-epld.8.2.3.img
 n7700-s2-epld.8.3.2.img
 Beyond Compare.zip
 nxos.7.0.3.I7.6.bin</p>

<p>bootflash::</p>

<p>auto-s
  .patch
  .rpmstore
  libmon.logs
  .swtam
  disk_log.txt
  mem_log.txt.old.gz
  mem_log.txt
  bios_bootup_scratch_not_cleared
  n9000-epld.7.0.3.I7.5a.img
  lacp.pcap
  urib_api_log.txt
  lxc
  ssd_log_amp.log
  20190227_023250_poap_30959_init.log
  aci-n9000-dk9.13.1.2m.bin
  ptp
  testrun
  tfp:
  bios_daemon.dbg
  test
  CpuUsage.Log
  cdp.msgs
  stfp:
  20190227_023250_poap_30959_1.log
  20190227_023250_poap_30959_2.log
  cdp.ts
  0x101_sshd_core.10840
  20190314_143009_poap_31480_init.log
  cdp.ts2
  nxos.CSCvn94487-n9k_ALL-1.0.0-9.2.2.lib32_n9000.tar</p>

<p>loader &gt;</p>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”- loader &gt; boot usb1:nxos.7.0.3.I7.6.bin â€”â€”â€”â€”â€”â€”â€”â€”â€”- 
Booting usb1:nxos.7.0.3.I7.6.bin
Trying diskboot
 Filesystem type is fat, partition type 0xc
Image valid</p>

<p>Saving image for img-sync â€¦
Found /mnt/pss/rtdbctrl.log, migrating to /mnt/pss/xlog/
Loading system software</p>

<p>Cisco Nexus Operating System (NX-OS) Software
TAC support: http://www.cisco.com/tac
Copyright (C) 2002-2019, Cisco and/or its affiliates.
All rights reserved.
The copyrights to certain works contained in this software are
owned by other third parties and used and distributed under their own
licenses, such as open source.  This software is provided â€œas is,â€ and unless
otherwise stated, there is no warranty, express or implied, including but not
limited to warranties of merchantability and fitness for a particular purpose.
Certain components of this software are licensed under
the GNU General Public License (GPL) version 2.0 or
GNU General Public License (GPL) version 3.0  or the GNU
Lesser General Public License (LGPL) Version 2.1 or
Lesser General Public License (LGPL) Version 2.0.
A copy of each such license is available at
http://www.opensource.org/licenses/gpl-2.0.php and
http://opensource.org/licenses/gpl-3.0.html and
http://www.opensource.org/licenses/lgpl-2.1.php and
http://www.gnu.org/licenses/old-licenses/library.txt.
switch(boot)#
switch(boot)#
â€”â€”â€”â€”â€”â€”â€”â€”â€”- switch(boot)# init system â€”â€”â€”â€”â€”â€”â€”â€”â€”-</p>

<p>This command is going to erase your startup-config, licenses as well as the contents of your bootflash:.
Do you want to continue? (y/n)  [n] y
Initializing the system â€¦
Checking flash â€¦</p>

<p>Initialization completed.
switch(boot)#
switch(boot)#
switch(boot)# load-nxos
Unsquashing rootfs â€¦</p>

<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”- after boot up with NXOS, suggest to reload again â€”â€”â€”â€”â€”â€”â€”â€”â€”-</p>

<p>Abort Power On Auto Provisioning [yes - continue with normal setup, skip - bypass password and basic configuration, no - continue with Power On Auto Provisioning] (yes/skip/no)[no]: yes
Disabling POAPâ€¦â€¦.Disabling POAP</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     ---- System Admin Account Setup ----
</code></pre></div></div>

<p>Do you want to enforce secure password standard (yes/no) [y]:</p>

<p>Enter the password for â€œadminâ€:
  Confirm the password for â€œadminâ€:</p>

<p>2019 May 23 16:59:35 switch %$ VDC-1 %$ %COPP-2-COPP_POLICY: Control-Plane is protected with policy copp-system-p-policy-strict.</p>

<p>User Access Verification
 login: admin
Password:</p>

<p>è½¬æ¢
å‰ä¸€ä¸ª versionï¼Œç„¶å APIC
å¦‚æœéœ€è¦æ FPGA</p>
:ET